# AI Process - Part 3: AI 서비스 프로세스

> **AI가 실제 서비스로 동작하는 과정**을 프로세스 관점에서 학습하는 교육용 프로젝트

[![Part](https://img.shields.io/badge/Part-3%20of%204-blue)]()
[![Java](https://img.shields.io/badge/Java-17+-orange)]()
[![Gradle](https://img.shields.io/badge/Gradle-8.5-green)]()

---

## 학습 목표

**AI가 API 호출부터 자동 수정까지 동작하는 서비스 과정을 이해합니다**

```
입력: "이 코드를 분석해줘"
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 15: API 호출 (API Calling)                         │
│ 요청 구성 → HTTP 전송 → 응답 수신                        │
└─────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 16: 프롬프트 구성 (Prompt Engineering)             │
│ System Prompt + Context + Task + Output Format          │
└─────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 17: LLM 처리 (LLM Processing)                      │
│ 모델 선택 → 비용/성능 최적화 → 라우팅                    │
└─────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 18: 응답 파싱 (Response Parsing)                   │
│ JSON/Markdown → 구조화된 데이터 → 이슈 목록              │
└─────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 19: 액션 실행 (Action Execution)                   │
│ 코드 수정 → 리팩토링 → 파일 변경                         │
└─────────────────────────────────────────────────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────┐
│ STEP 20: 피드백 루프 (Feedback Loop)                    │
│ 검증 → 학습 → 재시도 전략 → 지속적 개선                  │
└─────────────────────────────────────────────────────────┘
        │
        ▼
출력: 수정된 코드 + 분석 리포트
```

---

## 학습 단계 (STEP 15-20)

| STEP | 제목 | 핵심 질문 | 실행 명령 |
|------|------|----------|----------|
| 15 | API 호출 | LLM API는 어떻게 사용하는가? | `./gradlew :step15-api:run` |
| 16 | 프롬프트 구성 | 좋은 프롬프트는 어떻게 만드는가? | `./gradlew :step16-prompt:run` |
| 17 | LLM 처리 | 어떤 모델을 언제 쓰는가? | `./gradlew :step17-llm:run` |
| 18 | 응답 파싱 | AI 응답을 어떻게 처리하는가? | `./gradlew :step18-response:run` |
| 19 | 액션 실행 | AI가 도구를 어떻게 사용하는가? | `./gradlew :step19-action:run` |
| 20 | 피드백 루프 | 결과를 어떻게 개선하는가? | `./gradlew :step20-feedback:run` |

---

## 빠른 시작

### 빌드
```bash
./gradlew build
```

### 데모 실행
```bash
# STEP 16: 프롬프트 구성 데모 (핵심)
./gradlew :step16-prompt:run

# STEP 20: 피드백 루프 데모
./gradlew :step20-feedback:run

# 전체 서비스 파이프라인
./gradlew :service-pipeline:run
```

### 출력 예시 (Prompt Engineering)
```
[ 프롬프트 구성 ]

  System Prompt:
    "You are an expert code reviewer..."

  Context:
    - 분석 대상 코드
    - 이전 대화 기록

  Task:
    "Analyze this code for security issues"

  Output Format:
    "Respond in JSON format with..."
```

### 출력 예시 (Feedback Loop)
```
[ 피드백 루프 ]

  시도 1: 코드 수정 실행
    → 빌드 실패 (구문 오류)

  시도 2: 전략 조정 후 재시도
    → 빌드 성공
    → 테스트 성공

  결과: 성공 (2회 시도)
```

---

## 프로젝트 구조

```
code-ai-part3-service/
├── step15-api/                # API 호출
├── step16-prompt/             # 프롬프트 구성
├── step17-llm/                # LLM 처리
├── step18-response/           # 응답 파싱
├── step19-action/             # 액션 실행
├── step20-feedback/           # 피드백 루프
├── service-pipeline/          # 서비스 파이프라인
└── docs/                      # 학습 문서
```

---

## 핵심 개념

### 프롬프트 엔지니어링
```
┌─────────────────────────────────────────────────────┐
│ 효과적인 프롬프트 구조                               │
│                                                      │
│ 1. System Prompt: "You are an expert..."            │
│ 2. Context: 코드, 분석 결과, 이전 대화               │
│ 3. Task: "Analyze this code for..."                 │
│ 4. Output Format: "Respond in JSON..."              │
└─────────────────────────────────────────────────────┘
```

### 피드백 루프
```
       ┌──────────────┐
       │   AI 실행    │
       └──────┬───────┘
              │
              ▼
       ┌──────────────┐
       │   결과 평가  │◀────────────┐
       └──────┬───────┘            │
              │                    │
        ┌─────┴─────┐              │
        ▼           ▼              │
    ┌───────┐  ┌───────┐           │
    │ 성공  │  │ 실패  │───────────┤
    └───────┘  └───┬───┘           │
                   │               │
                   ▼               │
            ┌──────────────┐       │
            │  전략 조정   │───────┘
            └──────────────┘
```

---

## 지원하는 LLM 프로바이더

| 프로바이더 | 특징 | 환경변수 |
|-----------|------|---------|
| Claude | 긴 컨텍스트, 안전성, 코드 분석 강점 | `CLAUDE_API_KEY` |
| OpenAI | 다양한 모델, Function Calling | `OPENAI_API_KEY` |
| Ollama | 로컬 실행, 무료, 프라이버시 | (불필요) |

### 모델 선택 가이드
```
┌───────────────────────────────────────────────────────────┐
│ 작업 유형별 권장 모델                                      │
├─────────────────────────────┬─────────────────────────────┤
│ 복잡한 분석                 │ Claude Opus, GPT-4          │
│ 일반 코드 리뷰              │ Claude Sonnet, GPT-4-Turbo  │
│ 빠른 응답                   │ Claude Haiku, GPT-3.5       │
│ 민감 데이터                 │ Ollama (로컬)               │
└─────────────────────────────┴─────────────────────────────┘
```

---

## 자동 액션 타입

| 액션 | 설명 |
|------|------|
| REPLACE_CODE | 코드 교체 |
| INSERT_CODE | 코드 삽입 |
| DELETE_CODE | 코드 삭제 |
| ADD_IMPORT | import 추가 |
| RENAME | 이름 변경 |
| EXTRACT_METHOD | 메서드 추출 |
| ADD_LOGGING | 로깅 추가 |

---

## 시리즈 전체 구성

```
┌─────────────────────────────────────────────────────────┐
│ Part 1: AI 기초 프로세스                                 │
│ 토큰화 → 컨텍스트 → 확률 → 샘플링 → Embedding → Transformer │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│ Part 2: 코드 분석 프로세스                               │
│ 파싱 → AST → 시맨틱 → 패턴매칭 → 이슈탐지 → 스코어링      │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│ Part 3: AI 서비스 프로세스 (현재) ◀──────────────────────  │
│ API → 프롬프트 → LLM → 응답파싱 → 액션 → 피드백           │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│ Part 4: 고급 주제                                        │
│ RAG → Agent → Fine-tuning → Multimodal → 통합           │
└─────────────────────────────────────────────────────────┘
```

---

## 기술 스택

| 기술 | 버전 | 용도 |
|------|------|------|
| OkHttp | 4.12.0 | HTTP 클라이언트 |
| Gson | 2.10.1 | JSON 파싱 |

---

## 다음 단계

- 👈 [Part 1: AI 기초 프로세스](https://github.com/devload/code-ai-part1-basics)
- 👈 [Part 2: 코드 분석 프로세스](https://github.com/devload/code-ai-part2-analyzer)
- 👉 [Part 4: 고급 주제](https://github.com/devload/code-ai-part4-advanced)

---

## 라이선스

MIT License

---

**Version**: 3.0.0 | **STEP**: 15-20 | **Focus**: AI Service Process
